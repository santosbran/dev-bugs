<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>
        <title></title>
        <style>
            .ac-container .label {
                    padding: 8px !important;
                }
        </style>
        <script>
            $(function () {
                $("#tabs3").tabs();
            });
            function compania1(id) {
                $("#form" + id + "\\:id" + id).val(id);
                $("#form" + id + "\\:but" + id).trigger("click");
                document.getElementById("res:compnay").value=id;
            }
            function mostrarEsrCompania(id,companys){
                    $("#res\\:idesr").val(id);
                    $("#matrona\\:idesrm").val(id);
                    $("#res\\:solorender2").trigger("click");
                    $("#res1\\:solorender3").trigger("click");
                    $("#res\\:refesr").trigger("click");
                    
                }
                
                
                function show12(idESR,component){
                        var idForm= $(component).parent().attr('id');
                        var idNombre= idForm.split(":");
                        $("#resultabtodosComp\\:id").val(idESR);
                        $("#resultabtodosComp\\:esrRepeat\\:"+idNombre[2]+"\\:ref").trigger("click");
                        $('#inicialPageESR').hide();
                        $('#divOtrosDocs').hide();
                        
                        
                }
                function setValues(){
                         var input = document.getElementById("res:compnay").value;
                         var input2 = document.getElementById("res:idesr").value;
                         $("#res1\\:solorender3").trigger("click");
                         show3();
                          
                     }
                     function show3(){
                         $("#res\\:refesr").trigger("click");
                     }
                     
                     function menuBotoneraESRTabCompany() {
                         console.log("mostrando botonera");
                        //funcion para mostrar el menu respectivo en la tabla de ESRs
                        // y ocultar los otros botones
                        $("#ico0").css("display", "none");
                        $("#ico1").css("display", "none");
                        $("#ico2").css("display", "none");
                        $("#ico3").css("display", "none");

                        $("#openAcMenu").css("display", "none");
                        $("#menuNewAirPlane").css("display", "none");

                        $("#menuPrintReport").css("display", "none");
                        $("#menuHours").css("display", "none");
                        $("#menuACInfo").css("display", "none");

                        $("#botoneraESR").css("display", "block");
                    }
                     
                     
        </script>
        <style>
            #main {

                /*display: block*/;
            }
            .label {
                white-space:  inherit !important;
            }
      </style>
    </h:head>
    <h:body>               


        <div class="w-full h-full">
            <div id="tabs-all" class="h-full w-full">
                <div class="w-full h-full">
                    <section id="secdas1" class="ac-container fondoSection" style="overflow-x: hidden;">
                     <h:form id="tabsFormEsr">
                            <h:inputText value="#{tabEsrEaEoBean.itemId}" style="display: none;" id="id">
                                <f:ajax event="change" render="@form refremeta" />
                            </h:inputText>                                                        
                    </h:form>
                    <h:panelGroup id="taskComp">
                       <h:form id="resultabtodosComp">
                        <h:inputText value="#{tabEsrEaEoBean.itemId}" style="display: none;" id="id"><f:ajax event="change" render="@this refremeta" /></h:inputText>  
                        <ui:repeat value="#{tabEsrEaEoBean.listfiltro}" var="item" id="esrRepeat" >
                                <div id="acord#{item.esr}" style="display: block;" class="borderGrisAcordion">
                                <h:panelGroup id="dejarlo">                                  
                                    <input id="ac-#{item.esr}" class="input" name="accordion-1" type="radio" onclick="show12('#{item.esr}',this);" >
                                    </input>
                                    <label  for="ac-#{item.esr}" style="width: 100%; margin-bottom: 0;">
                                        <div class="flex w-full h-full item-style cursor-pointer">
                                            <div class="flex justify-between w-full py-4 px-2 items-center">
                                                <div class="text-left">
                                                    <span class="font-extrabold">#{item.woorder}</span>
                                                </div>
                                                <div class="flex items-center">
                                                    <h:panelGroup rendered="#{item.tieneHijos ne 0}">
                                                        <span class="glyphicon glyphicon-arrow-down" style="float: right;margin-right: 5px;top: 5px;" />
                                                    </h:panelGroup>
                                                    <h:panelGroup rendered="#{item.usrCoduser eq null or item.usrCoduser eq '0'}">
                                                        <span class="glyphicon glyphicon-warning-sign" style="float: right;margin-right: 5px;top: 5px;"/>
                                                    </h:panelGroup>
                                                    <h:panelGroup rendered="#{tabEsrEaEoBean.verFecha(item.reqFechaIns) eq 1}"><div class="imgico" rendered="true"><span class="badge label-success span-success">O</span></div></h:panelGroup>
                                                    <h:panelGroup rendered="#{tabEsrEaEoBean.verFecha(item.reqFechaIns) eq 2}"><div class="imgico" rendered="true"><span class="badge label-warning span-warning">O</span></div></h:panelGroup>
                                                    <h:panelGroup rendered="#{tabEsrEaEoBean.verFecha(item.reqFechaIns) eq 3}"><div class="imgico" rendered="true"><span class="badge label-danger span-danger">O</span></div></h:panelGroup>
                                                </div>
                                            </div>
                                        </div>
                                    </label>
                                    <article class="ac-large">
                                        <div class="styleacordeon" >
                                            <h:panelGroup id="xyz">

                                                <h:dataTable  class="table dt-responsive nowrap table-hover tablaESRIngeniero" value="#{tabEsrEaEoBean.listAll}" var="item1" style="width: 100% !important">
                                                    <ui:param name="taskeo" value="#{item1[0]}##{item1[1].eoIdord}-#{item1[1].eoSubject}"/>                                                                                                        

                                                    <ui:param name="taskea" value="#{item1[0]}##{item1[1].eagId}-#{item1[1].eagTitle}"/>
                                                    <ui:param name="cuseo" value="#{item1[1].eoCustomer}-#{item1[1].eoTail}"/>
                                                    <ui:param name="cusea" value="#{item1[1].eagCustomer}-#{item1[1].eagTail}"/>
                                                    <ui:param name="taskna" value="#{item1[0]}"/>
                                                    <ui:param name="cusna" value="#{item1[0]}"/>
                                                    <h:column>
                                                        <h:commandLink  id="lin" action="#{tabEsrEaEoBean.actTodas(item1)}" style="color:black;" onclick="ocultarbtn();">
                                                            <div class="califa cien-prc">
                                                                <h:outputLabel  value="#{item1[0] eq 'EO' ? taskeo : (item1[0] eq 'EA' ? taskea : taskna)}"  ></h:outputLabel><br></br>
                                                                <h:outputLabel  value="#{item1[0] eq 'EO' ? cuseo : (item1[0] eq 'EA' ? cusea : cusna)}"  rendered="#{item1[0] ne 'NA'}"></h:outputLabel>
                                                            </div>
                                                            <f:ajax execute="@form" render="@this mostrarEAtoriN inputForm68 resultFormEAList nombs resultForm66 inptEA scriptEa reEaStatus slither13 butea inputs refremeta" listener="#{tabEsrEaEoBean.refreshEA()}"/>
                                                        </h:commandLink>
                                                    </h:column>
                                                    
                                                </h:dataTable>
                                                

                                                <h:commandButton id="ref" action="#{tabEsrEaEoBean.actESR(tabEsrEaEoBean.itemId)}" style="display: none;">

                                                    <f:ajax execute="@form" render="xyz fpaneltask res#{item.esr} matrona autoesr btnadd1:btnadd2
                                                            inputModalhours resultenghours inputForm68 resultFormEAList inputForm69 inputForm70 inputForm70Inicial inputForm71
                                                            scripEA scrptesr butcom resultabEa resultForm66 idorder nombs autocom butesr
                                                            scriptx resultForm scriptAcTy slither0 scriptWT resultForm5 slither1 scriptEoSt
                                                            resultForm2 slither22 scriptPrefx resultForm3 slither3 scriptPrio resultForm4
                                                            slither4 reEaStatus slither13 scriptEa docsesr ftasks fpaneltask dismenueaeo
                                                            sacarea scripx scrip uploadEsrForm refremeta 
                                                            botoneraSaveF botoneraCleanF botoneraRepEsrF botoneraRsInicialBuincF botoneraTrackingESRF botoneraDisposicionESRF botoneraOtrosDocDivF botoneraEAESRF"  onevent="menuBotoneraESRTabCompany"/>
                                                </h:commandButton>
                                            </h:panelGroup>


                                        </div>
                                       
                                    </article>
                                   
                                </h:panelGroup>  
                            </div>
                            </ui:repeat>
                         </h:form>
                            


                        </h:panelGroup>
                </section>
                </div>
            </div>

            
        </div>
          
    </h:body>
</html>