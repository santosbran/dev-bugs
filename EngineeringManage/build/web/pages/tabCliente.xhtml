<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>
        <title></title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <h:outputStylesheet library="styleAE" name="css/bootstrap.min.css"/>
        <h:outputStylesheet library="styleAE" name="css/sign-styles.css"/>
        <h:outputStylesheet library="styleAE" name="css/dataTables.min.css"/>
        <h:outputStylesheet library="styleAE" name="css/dataTables.css"/>
        <h:outputStylesheet library="styleAE" name="css/jquery-ui.css"/>
        <h:outputStylesheet library="styleAE" name="css/jquery-ui.theme.css"/>
        <h:outputScript library="styleAE" name="js/jquery.js" />
        <h:outputScript library="styleAE" name="js/bootstrap.min.js" />
        <h:outputScript library="styleAE" name="js/jquery-ui.js" />
        <h:outputScript library="styleAE" name="js/datatables.min.js" />
        <h:outputScript library="styleAE" name="js/framework.js" /> 
        <h:outputScript library="jquiAE" name="js/datatable-es.js" rendered="#{swtLanguage.language eq 'es'}"/>
        <h:outputScript library="styleAE" name="js/table-slow.js" />
        <h:outputStylesheet library="styleAE" name="css/main-styles.css"/>
        <h:outputStylesheet library="styleAE" name="font-awesome/css/font-awesome.min.css"/>
       
        <h:outputStylesheet library="styleAE" name="css/estilos.css"/>
        
        <script>
            
            $(function () {
                $("#tabscliente").tabs();
            });
            
           function companycliente(idcom){
               $("#formcliente"+idcom+"\\:id").val(idcom);
               $("#formcliente"+idcom+"\\:but").trigger("click");
           }
           //function countgen(){
              // $("#formcuent\\:contgeneral").trigger("click");
          // }
        </script>
        
    </h:head>
    <h:body>

        <div id="tabscliente" style="height: 100%;border: 1px solid #aeaeae;">
            <div id="tabs-all" style="height: 85%;">
                <div class="ingclas hecien">
                    <h:form id="customer" style="overflow: auto; height: 100%;font-size: 12px;">
                        <h:dataTable  class="table left-align tablehand" value="#{customerManagerBean.listado}" var="item" style="width: 100% !important">
                            <h:column>
                                <h:commandLink action="#{customerManagerBean.filtraocliente(item.engId)}" class="coman">
                                        <h:outputText  value="#{item.engName}" />                                     
                                    <f:ajax execute="@form" render="@form manager formrefre formlabalflt labelcontflt flota customer formula task formlabaling formlabaltask formlabal labelcont refremeta"/>
                                </h:commandLink>
                            </h:column>
                            <h:column>
                                    <h:graphicImage library="styleAE" name="img/main/chart.png"  style="width: 20px; width: 20px; position: relative; margin-bottom: 3px;cursor: pointer;" onclick="showGrafic('#{item.engId}');"/>                                                                                                         
                                    <span class="badge label-#{item.color}" onclick="closeGrafic();" style="cursor: pointer;">#{item.tasks}</span> 
                            </h:column>
                        </h:dataTable> 
                    </h:form>
                </div>
            </div>

            <c:forEach  items="#{companyBean.listado}" var="company" >
                <div id="tabs-#{company.ciaCode}" style="height: 85%;">
                    <h:panelGroup id="panelcliente#{company.ciaCode}">
                    <div class="ingclas hecien">
                    <h:form id="customer#{company.ciaCode}" style="overflow: auto; height: 100%;font-size: 12px;">
                        <h:dataTable  class="table left-align tablehand" value="#{customerManagerBean.customer2}" var="item" style="width: 100% !important">
                            <h:column>
                                <h:commandLink action="#{customerManagerBean.filtraocliente(item.engId)}" class="coman">
                                        <h:outputText  value="#{item.engName}" />                                     
                                    <f:ajax execute="@form" render="@form manager formrefre formlabalflt labelcontflt flota customer formula task formlabaling formlabaltask formlabal labelcont refremeta"/>
                                </h:commandLink>
                            </h:column>
                            <h:column>
                                    <h:graphicImage library="styleAE" name="img/main/chart.png"  style="cursor:pointer;width: 20px; width: 20px; position: relative; margin-bottom: 3px;" onclick="showGrafic('#{item.engId}');"/>                                                                                                         
                                    <span class="badge label-#{item.color}" onclick="closeGrafic();" style="cursor: pointer;">#{item.tasks}</span> 
                            </h:column>
                        </h:dataTable> 
                    </h:form>
                </div>
                        </h:panelGroup>
                </div>
            </c:forEach>
            <div style="width: 100%; background: #999; height: 45px;color: white;">
                <h:outputLabel value="TOTAL AVG" style="bottom: 0;position: relative; left: 5%; top: 10px"/>
                <h:form id="formlabal" style="float: right;position: relative;top: 7px;right: 5.5%;">
                    <h:outputText id="labelcont" value="#{customerManagerBean.conteoclientesgeneral}" />
                </h:form>                

            </div>
            <ul>
                <li><a href="#tabs-all">#{gen_msg['all']}</a></li>

                <c:forEach  items="#{companyBean.listado}" var="clicom" >
                    <li onclick="companycliente('#{clicom.ciaCode}');" title="#{clicom.ciaName}"><a href="#tabs-#{clicom.ciaCode}">#{clicom.ciaCode}</a></li>
                    <h:form id="formcliente#{clicom.ciaCode}">
                        <h:inputText value="#{companyBean.company}" style="display: none;" id="id"><f:ajax event="change" render="@this refremeta" /></h:inputText>
                        <h:commandButton id="but" action="#{customerManagerBean.clientesbycompany(companyBean.company)}" style="display: none;" >
                            <f:ajax  render="@form matrona idorder nombs scrip autocom panelcliente#{clicom.ciaCode} formlabal labelcont refremeta" execute="@form"  />
                        </h:commandButton>
                    </h:form>
                </c:forEach>
            </ul>
        </div>
    </h:body>
</html>