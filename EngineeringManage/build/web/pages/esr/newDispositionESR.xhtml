<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
    <f:view locale="#{swtLanguage.locale}">
        <h:head>
            <title></title> <!-- Nombre de la página - aplicación -->
            <style>
                .engGetReport2{
                    border-bottom: 3px solid #bf1e2d !important;
                    border-left: 3px solid #bf1e2d !important;
                    color: white !important;
                    background-color: gray !important;
                    padding: 6px 10px 0px 10px !important;
                    text-transform: uppercase !important;
                    font-size: 12px !important;
                    color: white !important;
                }
                
                #mainDisposition > .handle1 {
                    transform: rotate(0deg);
                    float: left;
                    position: absolute;
                    top: 90px;
                    left: 9px;
                    padding: 0px 0px 0px 0px;
                    -webkit-flex: 0%;
                    flex: 0%;
                    -webkit-order: 5;
                    order: 5;
                    width: 20px;
                    height: 20px;
                }
               
                .estiloNewTracking {
                    top: 190px !important;
                    width: 100% !important;
                    height: 30px !important;
                    margin-bottom: 0px !important;
                    border-bottom: 3px solid #bf1e2d !important;
                    border-left: 3px solid #bf1e2d !important;
                    color: white !important;
                    background-color: gray !important;
                    padding: 6px 10px 0px 10px !important;
                    display: block !important;
                    margin-right: 1% !important;
                    text-transform: uppercase !important;
                    font-size: 12px !important;
                    color: white !important;
                } 
                .bs-callout {
                    padding: 10px 10px;
                    margin: 4px 0;
                    border: 1px solid #eee;
                    border-left-width: 5px;
                    border-radius: 3px;
                    font-family: 'Helvetica Neue', Helvetica,Arial,sans-serif !important;
                    width: 100%;
                    box-shadow: 1px 2px 5px grey;
                    -webkit-box-shadow: 1px 2px 5px grey;
                }
                .bs-callout-complete {
                    border-left-color: #92d14f;
                }
                .select-activity {
                    cursor: pointer;
                    margin-bottom: 0px;
                }
                .bs-callout h5 {
                    margin-top: 0;
                    margin-bottom: 4px;
                    color: #0070c8;
                    font-family: 'Helvetica Neue', Helvetica,Arial,sans-serif !important;
                    text-align: justify;
                }
                .fondoMenuAEIS2{
                    background: white;
                 }
				 
                .fondoMenuAEIS2:hover,
		.fondoMenuAEIS2:active, 
		.fondoMenuAEIS2:focus{
                    background: #ADAAA9; /*#337ab7;*/
                 } 
            </style>
            <style>
                ::-webkit-scrollbar-thumb {height: 10px !important; background-color: #a8a8a8;border-radius: 3px;}
                
                    
                table.dataTable.nowrap td {
                    white-space: normal !important;
                    word-break: break-word !important;
                }
                .file-caption-main{
                    left: 12.6%;
                } 
                .barraXLista{
                    overflow-y: scroll !important; 
                }
                header, footer {
                    display: block;
                    /* margin: 4px; */
                    /* padding: 5px; */
                    height: 2% !important;
                    background: transparent;
                    margin-top: 0.3%;
                }

                .dataTables_wrapper {

                    background: rgba(205,204,204,0.65) !important; 

                }                       
                
                
                table.dataTable.dtr-inline.collapsed>tbody>tr>selected:hover{
                    background-color: #003f72;
                    color: white !important;
                    cursor: pointer !important;
                }
                
                table.dataTable tbody tr.selected td {              
                    color: white !important;
                }
                
                /* redimension de todos lo paneles al cambio minimo dado*/
       
            table.dataTable tbody tr{
                    vertical-align: middle;
                    cursor: pointer;
                }
            /* modificacion para ajuste4 de los campos de los forumulario centrales]*/
                    @media all and (max-width: 768px) {

                    .tableeo.pararesponse tr{
                        display: table;
                        width: 100%;
                    }
                    
                    .tableeo.pararesponse td.ten-prc{
                        display: table-row;
                    }
                    table.dataTable tbody tr.selected {
                    background-color: #003f72;
                    color: white !important;
                    cursor: pointer;
                }
                    table.dataTable tbody tr.selected label {              
                    color: white !important;
                }
                    .tableeo.pararesponse tr td{
                        width: 30%;
                        text-align: left;
                    }
                    
                    }   
                       .pararesponse{
                     font-weight: bold;
                 }
                .margenCompanyChequeo{
                    margin-left: 0%;
                }
                @media screen and (min-height:400px) and (max-height:449px){
                    .fondoSection2{
                        height: 50%;
                    }
                }
                @media screen and (min-height:450px) and (max-height:499px){
                    .fondoSection2{
                        height: 55%;
                    }
                }
                @media screen and (min-height:500px) and (max-height:514px){
                    .fondoSection2{
                        height: 60%;
                    }
                }
                @media screen and (min-height:515px) and (max-height:549px){
                    .fondoSection2{
                        height: 65%;
                    }
                }
                @media screen and (min-height:550px) and (max-height:574px){
                    .fondoSection2{
                        height: 70%;
                    }
                }
                @media screen and (min-height:575px) and (max-height:599px){
                    .fondoSection2{
                        height: 75%;
                    }
                }
                @media screen and (min-height:600px) and (max-height:700px){
                    .fondoSection2{
                        height: 85%;
                    }
                }
                
                @media (max-height: 650px) and (min-width: 795px){
                    .altoContenedorPrincipalChequeos {
                        height: 90% !important;
                    }
                }
                @media (max-height: 700px) and (min-width: 895px){
                    .altoContenedorPrincipalChequeos {
                        height: 95% !important;
                    }
                }
                .handle1Eng2 {
                    position: fixed!important;                    
                }
                @media (max-width: 895px) and (min-width: 816px){
                    
                    #formDashBordTracking > .btn {
                        top: -23px !important;
                    }
                }
                @media (max-width: 815px) and (min-width: 791px){
                    
                    #formDashBordTracking > .btn {
                        top: -8px !important;
                    }
                }
                @media (max-width: 790px) and (min-width: 650px){
                    
                    #formDashBordTracking > .btn {
                        top: 15px !important;
                    }
                }
                @media (max-width: 649px) and (min-width: 500px){
                    
                    #formDashBordTracking > .btn {
                        top: 15px !important;
                    }
                }
          </style>   
            
            <script>
                $(document).ready(function (){
                    crearModal('#alertDispoEsr', '350px');
                });
               function onActivarDis(var1){
                        $("#formActivarDisposition\\:idReqDispo").val(var1);
                        $("#formActivarDisposition\\:idReqDispositionBtn").trigger("click");
                    }  
               function backDispositionESR(){
                    $('#newDispositionEng').hide(); 
                    $('#engineer').show();
                    $('#main').show();    
                    $('#supervisor').show();
                     window.switchSpaceNav();
                }
                
                function dragAddParamerDisp() { 
                    $("#restaurarPanelDisposition").show();
                    $("#das12Dispo").hide();
                }
                function dragEndParameterDisp() {
                    $("#restaurarPanelDisposition").hide();
                    $("#das12Dispo").show();                    
                    
                }
            function cargareventsDisposition(data) {
                var spinnerevents = document.getElementById("spinnerDisposition");
                var statuseve = data.status;
                if (statuseve === "begin" ) {
                        $("#inputForm11590").hide();
                        spinnerevents.style.display = "block";
                    } else { 
                            spinnerevents.style.display = "none";
                            if(statuseve === "success"){
                                $("#inputForm11590").show();
                            }		
                    }
            }
            function funalertDispoEsr(idModal, id) {
                $(idModal).dialog("open");
                $('#removeDispoEsr\\:idDispoEsr').val(id);
                return false;
            }        
            </script>
        </h:head>
        <h:body>
            <h:panelGroup id="alertDispoEsr" style="display:none;" pt:title="#{gen_msg['delete']}">
                    <h:form id="removeDispoEsr">
                        <h:inputText value="#{engReqIngaction.idalert1}" style="display: none;" id="idDispoEsr"><f:ajax event="change" render="@this refremeta" /></h:inputText>

                        <h:panelGrid columns="1" columnClasses="cien-prc center-align" class="cien-prc">
                            <h:outputLabel value="¿#{aees_msg['deleteitem']}?"  class="margenlabelDelete"/> 
                        </h:panelGrid>
                        <div class="divBotonesModales">
                            <div class="col-md-6 col-sm-6 col-lg-6 col-xs-6 alin-der">
                                <h:commandButton class="btn btn-signin" value ="#{gen_msg['acept']}" action="#{esrBean.deleteDisposition(engReqIngaction.idalert1)}" >
                                    <f:ajax execute="@form" render="ondeleteDispoEsr  @form resultadosDisposition inputForm11590 refremeta" />
                                </h:commandButton>
                            </div>
                            <div class="col-md-6 col-sm-6 col-xs-6 col-lg-6 alin-izq">
                                <h:commandButton class="btn btn-signin" value ="#{gen_msg['cancel']}" onclick="$('#modDisposition').dialog('open');">
                                    <f:ajax execute="@this" render="ondescarDispo @form refremeta" />
                                </h:commandButton>
                            </div>
                        </div>
                    </h:form>
                </h:panelGroup>
            
            <h:form id="formActivarDisposition">
                <h:inputText value="#{engReqIngaction.idDispTab}" id="idReqDispo" style="display: none;">
                    <f:ajax execute="@this" event="change" render="@this refremeta"/>
                </h:inputText>
                <h:commandButton id="idReqDispositionBtn"  style="display: none;" action="#{engReqIngaction.findIDDis(engReqIngaction.idDispTab)}">
                    <f:ajax execute="@form" render="inputForm11590 resultadosDisp refremeta" />
                </h:commandButton>  
            </h:form>
            <h:form id="formDhBdDisposition"> 
                <div class="flex py-1 w-full absolute" style="height: 48px;">
                <div class="flex items-center pl-4 w-full justify-between">
             <h:commandButton id="icoBack3" class="btn-menu backButton bg-aes-blue hover:bg-aes-red text-gray-800 font-bold py-2 px-4 m-px flex justify-center cursor-pointer z-10" title="Back" action="#{RequestTracking.limpiar()}">
                <f:ajax execute="@this" render="@this  refremeta backDispositionESRN"/>
                    </h:commandButton>
                     </div>
            </div>
        </h:form>
             <div id="mainDisposition" class="flex w-full h-full pt-16 px-4 pb-4 main-page-td">   
                  <div id="spinnerDisposition" class="dimensionesSpinner" style="display: none;" >
                        <div id="loader-wrapper" class="loadingif">
                            <div id="loader">
                            </div>
                            <div id="content">
                                <h3>#{gen_msg['loading']} f</h3>
                            </div>
                        </div>
                    </div>
                <nav id="das12Dispo" class="aside-page-td">
                    <div id="close-bt2" class="styleHeaderMroholdings">#{gen_msg['list']}<div class="image" id="ocultarPanelDisposition" onclick="dragAddParamerDisp();"><a href="#collapse2" class="nav-toggle"><i  class="glyphicon glyphicon-chevron-up colorGlyphicon"/></a></div></div>
                    <div id="collapse2" class="dashboard-content-h w-full bg-white">
                        <h:panelGroup layout="block" id="listDisposition" class="h-full w-full">
                            <section class="overflow-y-auto h-full w-full" >                             
                                <h:panelGroup id="taskengDs">
                                    <h:form id="resultadosDisposition">
                                        <h:inputText value="#{contCheckBean.itemId}" style="display: none;" id="idDisposition"><f:ajax event="change" render="@this refremeta" /></h:inputText>                                          
                                        <h:panelGroup id="cosa">
                                                <ui:repeat value="#{engReqIngaction.listado2}" var="s" id="esrRepeatDisposition"> 
                                                    <h:panelGrid class="select-activity" style="width: 100%" >
                                                        <h:column>
                                                        <a>
                                                            <div id="acorDisposition-#{s.einActionId}" class="bs-callout fondoMenuAEIS2 item-email" onclick="onActivarDis(#{s.einActionId})">
                                                                <div><p><h5>#{s.einUserIns}</h5></p></div>
                                                                <div><p style="color: black;"><strong>#{aees_msg['engDisposition']}: </strong>#{s.statusIA}</p></div>
                                                                <div><p style="color: black;"><strong>#{gen_msg['hours']}: </strong>#{s.einHours}</p></div>
                                                                <div><p style="color: black;"><strong>#{gen_msg['date']}: </strong><h:outputText value="#{s.einFechaIns}">  
                                                                <f:convertDateTime pattern="MM/dd/yyyy hh:mm a" timeZone="GMT-6" />  
                                                                </h:outputText></p></div>                                                                
                                                                <div><p style="color: black;"><strong>#{gen_msg['description']}: </strong>#{s.einDescription}</p></div>                                                                
                                                            </div>
                                                        </a>
                                                            
                                                        </h:column>    
                                                    </h:panelGrid>                                                      
                                                </ui:repeat>    
                                        </h:panelGroup>
                                    </h:form>
                                </h:panelGroup>
                            </section>
                        </h:panelGroup>
                    </div>
                </nav>
                <article class="flex-grow content-page-td">
                   <div id="divNewDisposition"  class="scroll panelesr" style="display: inherit; height: 100%;">
                       <h:panelGroup id="panalDisposiframe">
                        <!--   <div id="spinnerDisposition" class="dimensionesSpinner" style="display: none;" >
                        <div id="loader-wrapper" class="loadingif">
                            <div id="loader">
                            </div>
                            <div id="content">
                                <h3>#{gen_msg['loading']}</h3>
                            </div>
                        </div>
                    </div>-->
                <h:form id="inputForm11590" style="width: 100% !important; margin: 0% 0% 0% 0%; background: white; height: 100%;">
                    <div id="restaurarPanelDisposition" onclick="dragEndParameterDisp();" style="margin: 0% 0% 0% 0%; display: none;">
                        <a class="handle1Eng2">
                            <span class="gli-a glyphicon glyphicon-chevron-right colorGlyphicon parametroflechaESRIngenieros2" aria-hidden="true"/>
                            <label class="slide-label1"/>
                        </a>
                    </div>
                    <div id="close-tabNw" class="engGetReport2" style="height: 31px;"> 
                        <label style="margin-left: 15px;">#{aees_msg['engDisposition']}</label>
                    </div>

                    <div class="overflow-y-auto pb-16" style="height: calc(100% - 31px);">
                        <div class="flex flex-col py-8 px-4">
                            <div class="flex flex-col md:flex-row w-full pb-2"> 
                                <div class="disposition-label">
                                    <h:outputLabel value="ESR"/>
                                </div>
                                <div class="disposition-control">
                                    <h:outputLabel id="idEsrwo" value="#{tabEsrEaEoBean.idEsrWo}"/> 
                                </div>
                            </div>

                            <div class="flex flex-col md:flex-row w-full pb-2"> 
                                <div class="disposition-label">
                                    <h:outputText value="*&nbsp;&nbsp;&nbsp;" class="msgError" style="display: inline"/>
                                    <h:outputLabel value="#{gen_msg['description']}" for="inputdelatarea" style="display: inline"/>
                                </div>
                                <div class="disposition-control">
                                    <h:inputTextarea id="inputdelatarea" value="#{engReqIngaction.elemento.einDescription}"  class="form-control"
                                                     required="true" requiredMessage="#{gen_msg['description']} #{gen_msg['adjNecesario']}" style="resize: none" rows="10"/>
                                </div>
                            </div>
                            <div class="flex flex-col md:flex-row w-full pb-2"> 
                                <div class="disposition-label">
                                    <h:outputText value="*&nbsp;&nbsp;&nbsp;" class="msgError" style="display: inline"/>
                                    <h:outputLabel value="#{gen_msg['hours']}" for="horas" style="display: inline"/>
                                </div>
                                <div class="disposition-control">
                                    <h:inputText value="#{engReqIngaction.elemento.einHours}" id="horas" class="form-control" 
                                                 onkeypress="if (event.which &lt; 46 || event.which &gt; 57) if (event.which != 8) return false;"
                                                 required="true" requiredMessage="#{gen_msg['hours']} #{gen_msg['adjNecesario']}"
                                                 converterMessage="#{gen_msg['hours']} #{gen_msg['numalo']}" autocomplete="off"> 
                                        <f:convertNumber type="number" pattern="#0.00"/>
                                    </h:inputText>
                                </div>
                            </div>

                            <div class="flex flex-col md:flex-row w-full pb-2"> 
                                <div class="disposition-label">
                                    <h:outputText value="*&nbsp;&nbsp;&nbsp;" class="msgError" style="display: inline"/>
                                    <h:outputLabel value="#{aees_msg['engDisposition']}" style="display: inline"/>
                                </div>
                                <div class="disposition-control">
                                    <h:selectOneMenu  id="engDispo0" value="#{engReqIngaction.elemento.einStatus}" class="form-control"
                                                      required="true" requiredMessage="#{aees_msg['engDisposition']} #{gen_msg['adjNecesario']}">
                                        <f:selectItem itemLabel="...." itemValue="#{null}"/>
                                        <f:selectItems  value="#{engReqIngaction.getListastatus()}" var="option" itemLabel="#{option.estDesc}" itemValue="#{option.estId}"/>
                                        <f:ajax execute="@this" event="change" render="@this refremeta"/>
                                    </h:selectOneMenu>                                
                                </div>
                            </div>
                        </div>
                        <div class="alinearIzqmsgError">
                            <h:messages for="inputdelatarea" class="msgError" style="display: table-row;"/>
                            <h:messages for="horas" class="msgError" style="display: table-row;"/>
                            <h:messages for="engDispo0" class="msgError" style="display: table-row;"/>
                        </div>
                        <div class="flex justify-center">
                            <h:commandButton class="w-40 bg-aes-blue text-white text-center py-2 m-1" value ="#{!engReqIngaction.edit ? gen_msg['genAdd'] : gen_msg['genUpdate']}" action="#{tabEsrEaEoBean.engDispositioPanelDerecho(esrBean.elemento.reqMessageid)}">
                                <f:ajax  execute="@form" render="@form onsuccessDisp resultadosDisposition  refremeta resultabtodosComp" listener="#{tabEsrEaEoBean.guardarDispositionEaEO(esrBean.elemento.reqMessageid)}" onevent="cargareventsDisposition"/>
                            </h:commandButton>       
                            <h:commandButton class="w-40 bg-aes-blue text-white text-center py-2 m-1" value ="#{gen_msg['genAdd']}  #{gen_msg['new']}" action="#{engReqIngaction.limpiar()}" >
                                <f:ajax execute="@this" render="@form scripx refremeta ondescarDispo" />
                            </h:commandButton>                                    
                            <h:commandButton class="w-40 bg-aes-blue text-white text-center py-2 m-1 #{!engReqIngaction.edit ? 'hidden':''}" value ="#{gen_msg['delete']}" onclick="funalertDispoEsr('#alertDispoEsr', '${engReqIngaction.elemento.einActionId}');" >
                                <f:ajax execute="@this" render="@this refremeta" />
                            </h:commandButton>
                        </div>
                    </div>
                </h:form>                                
                       </h:panelGroup>
                 </div>
                </article>                
            </div>          
            <h:panelGroup id="backDispositionESRN">
                <h:outputScript rendered="#{facesContext.postback and not facesContext.validationFailed}">
                    backDispositionESR();
                </h:outputScript>
            </h:panelGroup>
            <h:panelGroup id="onsuccessDisp">
                <h:outputScript rendered="#{facesContext.postback and not facesContext.validationFailed}">
                    alertify.success("#{aees_msg['exito']}");
                </h:outputScript>
            </h:panelGroup>
            <h:panelGroup id="ondeleteDispoEsr">
                    <h:outputScript rendered="#{facesContext.postback and not facesContext.validationFailed}">
                        $("#modDisposition").dialog("open");
                        $("#alertDispoEsr").dialog("close");
                        alertify.log("#{aees_msg['removeitem']}");
                    </h:outputScript>
                </h:panelGroup>
            <h:panelGroup id="ondescarDispo">
                <h:outputScript rendered="#{facesContext.postback and not facesContext.validationFailed}">                    
                    alertify.custom = alertify.extend("custom");
                    alertify.custom("#{aees_msg['descardoperation']}");
                </h:outputScript>
            </h:panelGroup>
        </h:body>
    </f:view>
</html>
