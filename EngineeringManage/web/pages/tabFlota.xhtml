<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>
        <title></title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <h:outputStylesheet library="styleAE" name="css/bootstrap.min.css"/>
        <h:outputStylesheet library="styleAE" name="css/sign-styles.css"/>
        <h:outputStylesheet library="styleAE" name="css/dataTables.min.css"/>
        <h:outputStylesheet library="styleAE" name="css/dataTables.css"/>
        <h:outputStylesheet library="styleAE" name="css/jquery-ui.css"/>
        <h:outputStylesheet library="styleAE" name="css/jquery-ui.theme.css"/>
        <h:outputStylesheet library="styleAE" name="css/main-styles.css"/>
        <h:outputStylesheet library="styleAE" name="font-awesome/css/font-awesome.min.css"/>
        <h:outputScript library="styleAE" name="js/jquery.js" />
        <h:outputScript library="styleAE" name="js/bootstrap.min.js" />
        <h:outputScript library="styleAE" name="js/jquery-ui.js" />
        <h:outputScript library="styleAE" name="js/datatables.min.js" />
        <h:outputScript library="styleAE" name="js/framework.js" />
        <h:outputScript library="jquiAE" name="js/datatable-es.js" rendered="#{swtLanguage.language eq 'es'}"/>
        <h:outputScript library="styleAE" name="js/table-slow.js" />
        <h:outputStylesheet library="styleAE" name="css/estilos.css"/>
        <script>
            $(function () {
                $("#tabsflota").tabs();
            });
           function companyflota(idcom){
               $("#formflota"+idcom+"\\:id").val(idcom);
               $("#formflota"+idcom+"\\:but").trigger("click");
           }
           function clickfiltroflota(id){
               $("#formfilflota\\:id").val(id);
               $("#formfilflota\\:butcliente").trigger("click");
           }
           //function coutnflota(){
             //  $("#formcuentflota\\:contgeneral").trigger("click");
           //}
        </script>
    </h:head>
    <h:body>

        <h:form id="formfilflota">
            <h:inputText value="#{customerManagerBean.idflota}" style="display: none;" id="id"><f:ajax event="change" render="@this refremeta" /></h:inputText>
            <h:commandButton id="butcliente" action="#{customerManagerBean.filtradoflota(customerManagerBean.idflota)}" style="display: none;">
                <f:ajax render="customer formula task manager refremeta"/>
            </h:commandButton>
                
        </h:form> 
        <div id="tabsflota" style="height: 100%;border: 1px solid #aeaeae;">
            <div id="tabs-all" style="height: 85%;">
                <div class="ingclas hecien">
                    <h:form id="flota" class="scroll" style="overflow: auto; height: 100%;font-size: 12px;">
                        <h:dataTable class="table center-aling tablehand"  value="#{customerManagerBean.fleet}" var="item" style="width: 100% !important" >
                            <h:column>
                                <h:graphicImage  style="float:left;" library="styleAE" name="img/main/PlaneIcon-01.png"/>
                            </h:column>
                            <h:column>

                                <h:commandLink action="#{customerManagerBean.filtradoflota(item.flota)}" class="coman">
                                        <h:outputText id="idreg" value="#{item.flota}"/>
                                <f:ajax execute="@form" render="@form manager formrefre formlabalflt labelcontflt customer flota formula task formlabaling formlabaltask formlabal labelcont refremeta"/>
                                </h:commandLink>

                            </h:column>
                            <h:column>
                                    <span class="badge label-#{item.color}">#{item.numflota}</span>
                            </h:column>
                        </h:dataTable> 
                    </h:form>
                </div>
            </div>

            <c:forEach  items="#{companyBean.listado}" var="company" >
                <div id="tabs-#{company.ciaCode}" style="height: 85%;">
                    <h:panelGroup id="panelflota#{company.ciaCode}">
                        <div class="ingclas hecien">
                            <h:form id="flota#{company.ciaCode}" class="scroll" style="overflow: auto; height: 100%;font-size: 12px;">
                                <h:dataTable class="table center-aling tablehand"  value="#{customerManagerBean.fleetcompany}" var="item" style="width: 100% !important" >
                                    <h:column>
                                        <h:graphicImage  style="float:left;" library="styleAE" name="img/main/PlaneIcon-01.png"/>
                                    </h:column>
                                    <h:column>
                                        <h:commandLink action="#{customerManagerBean.filtradoflota(item.flota)}" class="coman">
                                                <h:outputText id="idreg" value="#{item.flota}"/><br></br>
                                                <h:outputText  value="#{item.company}"/>
                                            <f:ajax execute="@form" render="@form manager formrefre formlabalflt labelcontflt customer formula task formlabaling formlabaltask formlabal labelcont refremeta"/>
                                        </h:commandLink>
                                    </h:column>
                                    <h:column>
                                            <span class="badge label-#{item.color}">#{item.numflota}</span>
                                    </h:column>
                                </h:dataTable> 
                            </h:form>
                        </div>
                    </h:panelGroup>
                </div>
            </c:forEach>
            <div style="width: 100%; background: #999; height: 45px;color: white;">
                <h:outputLabel value="TOTAL" style="bottom: 0;position: relative; left: 5%; top: 10px"/>
<h:form id="formlabalflt" style="float: right;position: relative;top: 7px;right: 5.5%;">
    <h:outputText id="labelcontflt" value="#{customerManagerBean.conteoflotabycom}" />
</h:form>  
            </div>
            <ul>
                <li><a href="#tabs-all">#{gen_msg['all']}</a></li>

                <c:forEach  items="#{companyBean.listado}" var="clicom" >
                    <li onclick="companyflota('#{clicom.ciaCode}');" title="#{clicom.ciaName}"><a href="#tabs-#{clicom.ciaCode}">#{clicom.ciaCode}</a></li>
                    <h:form id="formflota#{clicom.ciaCode}">
                        <h:inputText value="#{companyBean.company}" style="display: none;" id="id"><f:ajax event="change" render="@this refremeta" /></h:inputText>
                        <h:commandButton id="but" action="#{customerManagerBean.flotasbycompany(companyBean.company)}" style="display: none;" >
                            <f:ajax  render="@form matrona idorder nombs scrip autocom panelflota#{clicom.ciaCode} formlabalflt labelcontflt formlabaling formlabaltask formlabal labelcont refremeta" execute="@form"  />
                        </h:commandButton>
                    </h:form>
                </c:forEach>
            </ul>
        </div>
    </h:body>
</html>