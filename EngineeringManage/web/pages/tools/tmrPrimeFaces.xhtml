<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions">
    <f:view locale="#{swtLanguage.locale}" >
        <h:head>
            <title></title>
            <h:outputScript library="styleAE" name="js/jquery-ui.js" />
                <h:outputScript library="styleAE" name="alerts/alertify.js"/>
                <h:outputScript library="styleAE" name="alerts/alertify.min.js"/>
                <h:outputStylesheet library="styleAE" name="alerts/alertify.core.css"/>
                <h:outputStylesheet library="styleAE" name="alerts/alertify.default.css"/>
                <h:outputStylesheet library="styleAE" name="css/events-styles.css"/>
                <h:outputScript library="styleAE" name="js/tooltip.js" />
              
                <style>
                    .ui-dialog .ui-dialog-titlebar{
                        background: red;
                    }
             .class1{
                    width: 40%;
                }
                .class2{
                    width: 60%;
                }
                
    .disabledb2 {
       font-weight: 700 !important;
       height: 36px !important;
       -moz-user-select: none !important;
       -webkit-user-select: none !important;
       user-select: none !important;
       cursor: default !important;
       border-radius: 4px !important;
    }
    .disabledb {
        margin-top: 30px !important;
        background: #dddddd !important;
        color: #FFFFFF !important;
        border: transparent !important;
    }

    .disabledb:hover,
    .disabledb:active,
    .disabledb:focus {
        background-color: #dddddd !important;
        color: #FFFFFF !important;
        border:solid 1px #dddddd !important;
    }
              
                 .hidefont{
                     
                         color: #a9a9a9 !important;
                     
                 }
                </style>
        </h:head>
        <h:body>   
            <h:panelGrid columns="2" columnClasses="class1, class2 " style="width: 50%;margin: auto;">
                <h:outputLabel value="#{gen_msg['searchreq']}" style="font-size: 20px;font-family: 'GalaxiePolarisMedium' !important;" />
                <hr style="border-top-color: red;" />
            </h:panelGrid>
            <h:form style="margin-bottom: 10%;">
                <h:panelGrid columns="1" columnClasses="cien-prc" style="width: 50%;margin: auto;">
                    <h:column>
                        <h:inputText id="sline" class="form-control1"  style="width: 80%; display: inline!important;height: 25px;" >
                        </h:inputText>
                        <h:commandButton id="flechasredirect" class="btn btn-signin"  value="#{gen_msg['search']}" style="margin-top: 0!important;font-family: 'GalaxiePolarisMedium' !important;">
                            <f:ajax execute="@form" render="@this refremeta"/>
                        </h:commandButton>
                    </h:column>

                </h:panelGrid>
                
            </h:form>
            
        
            <h:form id="resultTmr" style="font-size: 11px;" >
                <p:dataTable  id="tblTmr" var="item"  value="#{toolMakingBean.listado}"
                              paginator="true" rows="25" currentPageReportTemplate="{endRecord} #{gen_msg['adjLisIngre2']} {totalRecords}, #{gen_msg['page']} {currentPage} #{gen_msg['adjLisIngre2']} {totalPages}" paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                              rowsPerPageTemplate="5,10,25,50,100" editable="true"
                       >
                    <p:ajax event="page" update="tblTmr refreshDatepicker" />
                    <p:ajax event="filter" update="tblTmr refreshDatepicker" />
                    <p:ajax event="sort" update="tblTmr refreshDatepicker"/>
                    <h:messages class="msgError"/>
                    <p:column >
                        <p:rowEditor editTitle="#{aees_msg['mc_edit']}" />
                    </p:column>
                    <p:column headerText="ID" style="min-width: 150px; max-width: 150px;"  filterMatchMode="contains" >
                        <h:outputText value="0001"/>
                    </p:column>
                    
                    <p:column headerText="#{aees_msg['partNumber']}" style="min-width: 150px; max-width: 150px;"  filterMatchMode="contains" >
                        <p:cellEditor>
                            <f:facet name="output">
                                <h:outputText value="#{item.idPart}"/>
                            </f:facet>
                            <f:facet name="input">
                                <p:selectOneMenu id="partid" value="#{item.idPart}" style="width: 85%;" 
                                                 effect="fade" filter="true" filterMatchMode="contains">
                                    <f:selectItems value="#{partNumberBean.listado}" var="part" itemLabel="#{part.partCode}" itemValue="#{part.idPart}"/>

<!--                                    <p:column style="min-width: 150px; max-width: 150px;">
                                        <h:outputText value="#{item.idPart}" />
                                    </p:column>-->
                                </p:selectOneMenu>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column headerText="#{gen_msg['description']}" style="min-width: 150px; max-width: 150px;"  filterMatchMode="contains" >
                        <p:cellEditor>
                            <f:facet name="output">
                                <h:outputText value="#{item.toolReqDesc}"/>
                            </f:facet>
                            <f:facet name="input">
                                <h:inputText id="desc" class="form-control1" value="#{item.toolReqDesc}"/>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column headerText="#{gen_msg['quantity']}" style="min-width: 150px; max-width: 150px;"  filterMatchMode="contains" >
                        <p:cellEditor>
                            <f:facet name="output">
                                <h:outputText value="#{item.toolReqQty}"/>
                            </f:facet>
                            <f:facet name="input">
                                <h:inputText id="qty" class="form-control1" value="#{item.toolReqQty}"/>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column headerText="#{gen_msg['datereq']}" style="min-width: 150px; max-width: 150px;"  filterMatchMode="contains" >
                        <p:cellEditor>
                            <f:facet name="output">
                                <h:outputText value="#{item.toolRequiredDate}">
                                    <f:convertDateTime pattern="#{gen_msg['frmtDateConv']}" timeZone="GMT-6"/>
                                </h:outputText>
                            </f:facet>
                            <f:facet name="input">
                                <h:inputText id="rqdate" class="datevent form-control1" value="#{item.toolRequiredDate}">
                                    <f:convertDateTime pattern="#{gen_msg['frmtDateConv']}" timeZone="GMT-6"/>
                                    <p:ajax  event="change" update="@this totauto"/>
                                </h:inputText>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column headerText="#{gen_msg['fleet']}" style="min-width: 150px; max-width: 150px;"  filterMatchMode="contains" >
                        <p:cellEditor>
                            <f:facet name="output">
                                <h:outputText value="A330"/>
                            </f:facet>
                            <f:facet name="input">
                                <p:selectOneMenu id="fleet" value="#{item.idFleet}" style="width: 85%;" 
                                                 effect="fade" filter="true" filterMatchMode="contains">
                                    <f:selectItems value="#{toolMakingBean.listFleet}" var="fleet" itemLabel="#{fleet.arcfamCode}" itemValue="#{fleet.arcfamId}"/>

<!--                                    <p:column style="min-width: 150px; max-width: 150px;">
                                        <h:outputText value="#{item.idPart}" />
                                    </p:column>-->
                                </p:selectOneMenu>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column headerText="#{gen_msg['precioref']} $" style="min-width: 150px; max-width: 150px;"  filterMatchMode="contains" >
                        <p:cellEditor>
                            <f:facet name="output">
                                <h:outputText value="#{item.toolPrice}">
                                    <f:convertNumber  pattern="¤#,##0.00"  currencySymbol="$" type="currency"
                                                      locale="en-US" groupingUsed="true" integerOnly="true"
                                                      maxFractionDigits="2" minFractionDigits="2" />  
                                </h:outputText>
                            </f:facet>
                            <f:facet name="input">
                                <h:inputText id="priceref" class="form-control1" value="#{item.toolPrice}">
                                    <f:convertNumber  pattern="¤#,##0.00"  currencySymbol="$" type="currency"
                                                      locale="en-US" groupingUsed="true" integerOnly="true"
                                                      maxFractionDigits="2" minFractionDigits="2" />
                                    <f:ajax execute="@this" event="blur" render="@this refremeta"/>
                                </h:inputText>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column headerText="#{gen_msg['attached']}" style="min-width: 150px; max-width: 150px;">

                        <h:commandLink rendered="#{item.toolAtt ne null}">
                            <span class="glyphicon glyphicon-paperclip" style="color: black;font-size: 20px;"/>
                        </h:commandLink>

                    </p:column>
                    <p:column headerText="#{gen_msg['attquote']}" style="min-width: 150px; max-width: 150px;">

                        <h:commandLink rendered="#{item.toolQuoteAtt ne null}">
                            <span class="glyphicon glyphicon-paperclip" style="color: black;font-size: 20px;"/>
                        </h:commandLink>

                    </p:column>
                    <p:column headerText="#{gen_msg['priority']}" style="min-width: 150px; max-width: 150px;"  filterMatchMode="contains" >
                        <p:cellEditor>
                            <f:facet name="output">
                                <h:outputText value="#{item.toolRequestPrioriy}"/>
                            </f:facet>
                            <f:facet name="input">
                                <p:selectOneMenu id="priori" value="#{item.toolRequestPrioriy.priCod}" style="width: 85%;" 
                                                 effect="fade" filter="true" filterMatchMode="contains">
                                    <f:selectItems value="#{engPriorities.listado}" var="pri" itemLabel="#{pri.priDescription}" itemValue="#{pri.priCod}"/>

                                    <p:column style="min-width: 150px; max-width: 150px;">
                                        <h:outputText value="#{item.toolRequestPrioriy.priDescription}" />
                                    </p:column>
                                </p:selectOneMenu>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    
                 </p:dataTable>
            </h:form>
            <h:panelGroup id="refreshDatepicker">
                <script>
                    $('.datevent').datepicker({autoclose: true, language: '#{swtLanguage.language}'});
                </script>
            </h:panelGroup>
        </h:body>
    </f:view>
</html>


