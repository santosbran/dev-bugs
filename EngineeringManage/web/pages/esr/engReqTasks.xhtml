<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
    <f:view locale="#{swtLanguage.locale}">
        <h:head>
            <title>AEES - Sistema de ingenieria </title>
            <h:outputStylesheet library="styleAE" name="css/bootstrap.min.css"/>
            <h:outputStylesheet library="styleAE" name="css/sign-styles.css"/>
            <h:outputStylesheet library="styleAE" name="css/dataTables.min.css"/>
            <h:outputStylesheet library="styleAE" name="css/dataTables.css"/>
            <h:outputStylesheet library="styleAE" name="css/jquery-ui.css"/>
            <h:outputStylesheet library="styleAE" name="css/jquery-ui.theme.css"/>
            <h:outputStylesheet library="styleAE" name="css/main-styles.css"/>
            <h:outputStylesheet library="styleAE" name="font-awesome/css/font-awesome.min.css"/>
            <h:outputStylesheet library="styleAE" name="css/estilos.css"/>
            <h:outputStylesheet library="styleAE" name="css/estilos2.css"/>
            <h:outputStylesheet library="styleAE"  name="fileupload/fileinput.css"/>
            <link href="/EngineeringManage/javax.faces.resource/fileupload/fileinput.css.xhtml?ln=styleAE" media="all" rel="stylesheet" type="text/css" />
            
            
            <h:outputScript library="styleAE" name="js/jquery.js" />
            <h:outputScript library="styleAE" name="js/bootstrap.min.js" />
            <h:outputScript library="styleAE" name="js/jquery-ui.js" />
            <h:outputScript library="styleAE" name="js/datatables.min.js" />
            <h:outputScript library="styleAE" name="js/framework.js" />
            <h:outputScript library="jquiAE" name="js/datepicker-es.js" rendered="#{swtLanguage.language eq 'es'}"/> 
            <h:outputScript library="jquiAE" name="js/datatable-es.js" rendered="#{swtLanguage.language eq 'es'}"/>
            <h:outputScript library="styleAE" name="js/funcionesJS.js"/>
            <h:outputScript library="styleAE" name="js/funcionessinnombre.js"/>
            <h:outputScript library="styleAE" name="js/excelJS.js" />
            <h:outputScript library="styleAE" name="alerts/alertify.js"/>
            <h:outputScript library="styleAE" name="alerts/alertify.min.js"/>
            <h:outputStylesheet library="styleAE" name="alerts/alertify.core.css"/>
            <h:outputStylesheet library="styleAE" name="alerts/alertify.default.css"/>
            <h:outputScript library="styleAE" name="fileupload/fileinput.js" />
            <h:outputStylesheet library="styleAE" name="css/bootstrap-select.css"/>
            <h:outputScript library="styleAE" name="js/bootstrap-select.js" />
            
             <style type="text/css">
                .classDrag{
                    border: dashed 2px #ec1c24;
                    border-radius: 9px;
                }
            </style>
               <style type="text/css">
                .classDragcom{
                    border: dashed 2px #ec1c24;
                    border-radius: 9px;
                }
            </style>
        </h:head>
        <h:body>
            <div class="fondo">
                <h:form id="ftasks" style="margin: auto; margin-top: 5%;">
                    <h:panelGrid class="tableeo" columns="2" columnClasses="twentyfive-prc, seventyfive-prc " >
                        <h:outputText value="Task Card" class="h3" />
                        <hr style="border-top-color: red;" />
                    </h:panelGrid>                                       
                    <h:panelGrid id="taskCard" class="tableeo" columns="2" columnClasses="twentyfive-prc, eightyfive-prc ">                         
                        <h:outputLabel value="Log Page: "  />
                        <h:inputText id="logPage" value="#{taskReqCardBean.elemento.ertLogpage}" class="form-control" required="true" requiredMessage="El campo Log Pag es requerido">
                            <f:ajax render="@this refremeta" event="change"/></h:inputText>  
                        <h:outputLabel value="Tk Year: "  />
                        <h:inputText id="tkYear" value="#{taskReqCardBean.elemento.ertTkYear}" class="form-control" required="true" requiredMessage="El campo Tk Year es requerido">
                            <f:ajax render="@this refremeta" event="change"/></h:inputText>  
                        <h:outputLabel value="Tk Correlative: "  />
                        <h:inputText id="tkCorr" value="#{taskReqCardBean.elemento.ertTkCorr}" class="form-control" required="true" requiredMessage="El campo Correlativo es requerido">
                            <f:ajax render="@this refremeta" event="change"/></h:inputText>   
                        <h:outputLabel value="Principal"  />
                        <h:inputText id="principal" value="#{taskReqCardBean.elemento.ertPrincipal}" class="form-control" >
                            <f:ajax render="@this refremeta" event="change"/></h:inputText>                                                
                        <h:outputText id="select" value="taskCard"/> 
                        <h:selectOneMenu id="tasks" value="#{taskReqCardBean.tc}" class="form-control"  pt:data-live-search="true">
                            <f:selectItem itemLabel="....." itemValue=""/>
                            <f:selectItems value="#{taskReqCardBean.taskCards}" var="et" itemLabel="#{et.tcDescription}" itemValue="#{et.idCard}"/>                           
                            <f:ajax event="change" render="@this refremeta"/>
                        </h:selectOneMenu>
                    </h:panelGrid>
                    <h:panelGrid columns="2" style="margin:auto;">                        
                        <h:commandButton class="btn btn-signin" value ="#{!taskReqCardBean.edit ? gen_msg['genAdd'] : gen_msg['genUpdate']}" action="#{taskReqCardBean.guardar()}" style="margin-top: 0;" >
                            <f:ajax execute="@form"  render="ftasks fpaneltask refremeta"/>
                        </h:commandButton>
                        <h:commandButton class="btn btn-signin" value ="#{gen_msg['discard']}" action="#{taskReqCardBean.limpiar}" style="margin-top: 0;" >
                            <f:ajax execute="@form"  render="ftasks taskCard refremeta"/>
                        </h:commandButton>  
                    </h:panelGrid>
                </h:form>
                <h:panelGrid class="fondo" columns="2" columnClasses="twentyfive-prc, seventyfive-prc " >                    
                </h:panelGrid> 
            <h:form id="fpaneltask" style="width: 75%; margin: auto; margin-top: 4%">
                    
                        <h:dataTable id="tblTasks" class="table table-striped dt-responsive" pt:name="tblTasks" value="#{taskReqCardBean.listado}" var="item" style="width:100% !important;">                                
                                <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="ertLogpage"/>                                     
                                        </f:facet>
                                        <f:facet name="footer" > 
                                            <h:outputText value="ertLogpage"/>                                     
                                        </f:facet>
                                        <h:outputText value="#{item.ertLogpage}"/>
                                </h:column>
                                <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="ertTkYear"/>                                     
                                        </f:facet>
                                        <f:facet name="footer" > 
                                            <h:outputText value="ertTkYear"/>                                     
                                        </f:facet>
                                        <h:outputText value="#{item.ertTkYear}"/>
                                </h:column>
                                <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="ertTkCorr"/>                                     
                                        </f:facet>
                                        <f:facet name="footer" > 
                                            <h:outputText value="ertTkCorr"/>                                     
                                        </f:facet>
                                        <h:outputText value="#{item.ertTkCorr}"/>
                                </h:column>
                                <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="ertPrincipal"/>                                     
                                        </f:facet>
                                        <f:facet name="footer" > 
                                            <h:outputText value="ertPrincipal"/>                                     
                                        </f:facet>
                                        <h:outputText value="#{item.ertPrincipal}"/>
                                </h:column>
                                <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="ertPrincipal"/>                                     
                                        </f:facet>
                                        <f:facet name="footer" > 
                                            <h:outputText value="ertPrincipal"/>                                     
                                        </f:facet>
                                        <h:outputText value="#{item.idCard.tcDescription}"/>
                                </h:column>
                                <h:column>
                                    <h:commandButton class="btn-round-24 icon-edit-24">
                                        <f:ajax execute="@this" render="ftasks refremeta" />
                                        <f:setPropertyActionListener target="#{taskReqCardBean.elemento}" value="#{item}"/>
                                        <f:setPropertyActionListener target="#{taskReqCardBean.edit}" value="#{true}"/>
                                       
                                    </h:commandButton>
                                </h:column>
                                <h:column>
                                    <h:commandButton class="btn-round-69 icon-remove-69" action="#{taskReqCardBean.eliminar(item)}">
                                        <f:ajax execute="@this" render="@form refremeta" />                                                                                                     
                                    </h:commandButton>
                                </h:column>
                            
                            </h:dataTable>
                            <!--Aplicando el formato a la datatable, se hace de esta forma para que se aplique nuevamente tras el rerenderizado del form-->
                            <h:outputScript>formatTable('table[name=tblTasks]','${swtLanguage.language}','#inputModals159','.menut0');</h:outputScript>                                
                       
                    </h:form>
                <h:panelGrid class="fondo" columns="2" columnClasses="twentyfive-prc, seventyfive-prc " >                    
                </h:panelGrid>
            </div>
        </h:body>
    </f:view>
</html>
